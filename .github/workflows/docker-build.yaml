name: "Docker Build"
on:
  pull_request:
    branches:
      - "main"
jobs:
  docker-build:
    name: Docker Build
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v2.3.4
      - name: Docker Build
        run: |
          cd opensearch-operator
          cat Dockerfile
          go version
          sudo apt-get remove golang-go
          sudo apt-get remove --auto-remove golang-go
          sudo rm -rvf /usr/local/go
          wget https://dl.google.com/go/go1.17.linux-amd64.tar.gz
          sudo tar -xvf go1.17.linux-amd64.tar.gz
          sudo mv go /usr/local
          export GOROOT=/usr/local/go
          export GOPATH=$HOME/go
          export PATH=$GOPATH/bin:$GOROOT/bin:$PATH
          source ~/.profile
          go version
          go env
          go get opensearch.opster.io/pkg/builders
          go get opensearch.opster.io/pkg/helpers
          make docker-build